<div
  #container
  class="fixed bottom-0 left-0 right-0 z-50 bg-white rounded-t-lg shadow-lg transition-all duration-300 ease-in-out overflow-hidden"
  [class.max-h-[90vh]]="isExpanded"
  [class.max-h-[200px]]="!isExpanded"
  [attr.aria-expanded]="isExpanded"
>
  <!-- Handle with half-circle container -->
  <div class="relative -top-4 flex justify-center">
    <div
      class="w-10 h-5 bg-white rounded-t-full shadow-lg flex justify-center items-start cursor-pointer"
      (click)="toggleDrawer()"
      [attr.aria-label]="isExpanded ? 'Collapse drawer' : 'Expand drawer'"
      tabindex="0"
      (keydown.enter)="toggleDrawer()"
      (keydown.space)="toggleDrawer(); $event.preventDefault()"
    >
      <svg
        class="w-6 h-6 text-gray-500 transition-transform duration-300"
        [class.rotate-180]="isExpanded"
        fill="none"
        stroke="currentColor"
        viewBox="0 0 24 24"
        xmlns="http://www.w3.org/2000/svg"
      >
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 15l7-7 7 7"></path>
      </svg>
    </div>
  </div>

  <!-- Content area -->
  <div class="p-4 overflow-y-auto h-full">
    <!-- Preview content (always visible) -->
    <ng-container *ngIf="previewContent">
      <ng-container [ngTemplateOutlet]="previewContent"></ng-container>
    </ng-container>

    <!-- Full content (visible when expanded) -->
    <div
      class="transition-all duration-300"
      [class.opacity-0]="!isExpanded"
      [class.opacity-100]="isExpanded"
      [class.translate-y-4]="!isExpanded"
      [class.translate-y-0]="isExpanded"
    >
      <ng-content></ng-content>
    </div>
  </div>
</div>